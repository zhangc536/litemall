# Litemall 数据库结构（全表说明）

- 数据库：litemall（UTF8MB4）
- 通用字段：add_time、update_time、deleted（逻辑删除）
- 主键约定：绝大多数表以 id INT AUTO_INCREMENT 为主键
- 参考源文件：[litemall_table.sql](file:///c:/Users/ASUS/Desktop/fsdownload/litemall/litemall-db/sql/litemall_table.sql)
- 相关原文档：[database.md](file:///c:/Users/ASUS/Desktop/fsdownload/litemall/doc/database.md)

## 表分组总览
- 用户与账号：litemall_user、litemall_admin、litemall_role、litemall_permission
- 商品与类目：litemall_goods、litemall_goods_product、litemall_goods_specification、litemall_goods_attribute、litemall_category、litemall_brand
- 订单与售后：litemall_order、litemall_order_goods、litemall_aftersale、litemall_groupon、litemall_groupon_rules
- 互动与内容：litemall_comment、litemall_topic、litemall_issue、litemall_keyword、litemall_ad、litemall_notice、litemall_notice_admin
- 营销与行为：litemall_coupon、litemall_coupon_user、litemall_cart、litemall_collect、litemall_footprint、litemall_search_history
- 系统与配置：litemall_system、litemall_storage、litemall_log、litemall_region、litemall_address

## 字段明细

**litemall_user（用户表）**
- 主键：id
- 字段：
  - username VARCHAR(63) 用户名称
  - password VARCHAR(63) 用户密码
  - gender TINYINT(3) 性别：0未知，1男，1女
  - birthday DATE 生日
  - last_login_time DATETIME 最近登录时间
  - last_login_ip VARCHAR(63) 最近登录IP
  - user_level TINYINT(3) 0普通，1VIP，2高级VIP
  - nickname VARCHAR(63) 昵称
  - mobile VARCHAR(20) 手机
  - avatar VARCHAR(255) 头像
  - weixin_openid VARCHAR(63) 微信openid
  - session_key VARCHAR(100) 微信会话KEY
  - status TINYINT(3) 0可用,1禁用,2注销
  - add_time, update_time, deleted
  - 唯一索引：username

**litemall_admin（管理员表）**
- 主键：id
- 字段：
  - username VARCHAR(63) 管理员名称
  - password VARCHAR(63) 密码
  - last_login_ip VARCHAR(63) 最近登录IP
  - last_login_time DATETIME 最近登录时间
  - avatar VARCHAR(255) 头像
  - role_ids VARCHAR(127) 角色列表（JSON）
  - add_time, update_time, deleted

**litemall_role（角色表）**
- 主键：id
- 字段：
  - name VARCHAR(63) 角色名称（唯一）
  - desc VARCHAR(1023) 描述
  - enabled TINYINT(1) 是否启用
  - add_time, update_time, deleted

**litemall_permission（权限表）**
- 主键：id
- 字段：
  - role_id INT 角色ID
  - permission VARCHAR(63) 权限字符串
  - add_time, update_time, deleted

**litemall_goods（商品基本信息表）**
- 主键：id
- 字段：
  - goods_sn VARCHAR(63) 商品编号
  - name VARCHAR(127) 商品名称
  - category_id INT 类目ID
  - brand_id INT 品牌ID
  - gallery VARCHAR(1023) 宣传图列表（JSON）
  - keywords VARCHAR(255) 关键字（逗号分隔）
  - brief VARCHAR(255) 简介
  - is_on_sale TINYINT(1) 是否上架
  - sort_order SMALLINT(4) 排序
  - pic_url VARCHAR(255) 主图
  - share_url VARCHAR(255) 分享海报
  - is_new TINYINT(1) 新品
  - is_hot TINYINT(1) 人气
  - unit VARCHAR(31) 单位
  - counter_price DECIMAL(10,2) 专柜价
  - retail_price DECIMAL(10,2) 零售价
  - detail TEXT 详情（富文本）
  - add_time, update_time, deleted
  - 索引：goods_sn、category_id、brand_id、sort_order

**litemall_goods_product（商品货品表）**
- 主键：id
- 字段：
  - goods_id INT 商品ID
  - specifications VARCHAR(1023) 规格列表（JSON）
  - price DECIMAL(10,2) 价格
  - number INT 库存数量
  - url VARCHAR(125) 货品图片
  - add_time, update_time, deleted
  - 索引：goods_id

**litemall_goods_specification（商品规格表）**
- 主键：id
- 字段：
  - goods_id INT 商品ID
  - specification VARCHAR(255) 规格名
  - value VARCHAR(255) 规格值
  - pic_url VARCHAR(255) 规格图片
  - add_time, update_time, deleted
  - 索引：goods_id

**litemall_goods_attribute（商品参数表）**
- 主键：id
- 字段：
  - goods_id INT 商品ID
  - attribute VARCHAR(255) 参数名
  - value VARCHAR(255) 参数值
  - add_time, update_time, deleted
  - 索引：goods_id

**litemall_category（类目表）**
- 主键：id
- 字段：
  - name VARCHAR(63) 类目名称
  - keywords VARCHAR(1023) 关键字（JSON）
  - desc VARCHAR(255) 广告语
  - pid INT 父类目ID
  - icon_url VARCHAR(255) 图标
  - pic_url VARCHAR(255) 图片
  - level VARCHAR(255) 层级（L1/L2）
  - sort_order TINYINT(3) 排序
  - add_time, update_time, deleted
  - 索引：pid

**litemall_brand（品牌商表）**
- 主键：id
- 字段：
  - name VARCHAR(255) 名称
  - desc VARCHAR(255) 简介
  - pic_url VARCHAR(255) 图片
  - sort_order TINYINT(3) 排序
  - floor_price DECIMAL(10,2) 最低价（展示）
  - add_time, update_time, deleted

**litemall_order（订单表）**
- 主键：id
- 字段：
  - user_id INT 用户ID
  - order_sn VARCHAR(63) 订单编号
  - order_status SMALLINT(6) 订单状态
  - aftersale_status SMALLINT(6) 售后状态
  - consignee VARCHAR(63) 收货人
  - mobile VARCHAR(63) 手机号
  - address VARCHAR(127) 地址
  - message VARCHAR(512) 订单留言
  - goods_price DECIMAL(10,2) 商品总价
  - freight_price DECIMAL(10,2) 配送费
  - coupon_price DECIMAL(10,2) 优惠券减免
  - integral_price DECIMAL(10,2) 积分减免
  - groupon_price DECIMAL(10,2) 团购减免
  - order_price DECIMAL(10,2) 订单费用
  - actual_price DECIMAL(10,2) 实付金额
  - pay_id VARCHAR(63) 付款编号
  - pay_time DATETIME 付款时间
  - ship_sn VARCHAR(63) 发货编号
  - ship_channel VARCHAR(63) 物流公司
  - ship_time DATETIME 发货时间
  - refund_amount DECIMAL(10,2) 退款金额
  - refund_type VARCHAR(63) 退款方式
  - refund_content VARCHAR(127) 退款备注
  - refund_time DATETIME 退款时间
  - confirm_time DATETIME 确认收货
  - comments SMALLINT(6) 待评价数量
  - end_time DATETIME 关闭时间
  - add_time, update_time, deleted

**litemall_order_goods（订单商品表）**
- 主键：id
- 字段：
  - order_id INT 订单ID
  - goods_id INT 商品ID
  - goods_name VARCHAR(127) 商品名称
  - goods_sn VARCHAR(63) 商品编号
  - product_id INT 货品ID
  - number SMALLINT(5) 购买数量
  - price DECIMAL(10,2) 售价
  - specifications VARCHAR(1023) 规格列表
  - pic_url VARCHAR(255) 图片
  - comment INT 评论标识（-1超期不可评；0可评；>0为评论ID）
  - add_time, update_time, deleted
  - 索引：order_id、goods_id

**litemall_aftersale（售后表）**
- 主键：id
- 字段：
  - aftersale_sn VARCHAR(63) 售后编号
  - order_id INT 订单ID
  - user_id INT 用户ID
  - type SMALLINT(6) 售后类型（0未收货退款、1已收货退款、2退货退款）
  - reason VARCHAR(31) 原因
  - amount DECIMAL(10,2) 退款金额
  - pictures VARCHAR(1023) 凭证图片（JSON）
  - comment VARCHAR(511) 说明
  - status SMALLINT(6) 售后状态
  - handle_time DATETIME 管理员操作时间
  - add_time, update_time, deleted

**litemall_groupon（团购活动表）**
- 主键：id
- 字段：
  - order_id INT 关联订单ID
  - groupon_id INT 团购活动ID（参团场景）
  - rules_id INT 团购规则ID
  - user_id INT 用户ID
  - share_url VARCHAR(255) 分享图片
  - creator_user_id INT 开团用户ID
  - creator_user_time DATETIME 开团时间
  - status SMALLINT(6) 活动状态
  - add_time, update_time, deleted

**litemall_groupon_rules（团购规则表）**
- 主键：id
- 字段：
  - goods_id INT 商品ID
  - goods_name VARCHAR(127) 商品名称
  - pic_url VARCHAR(255) 商品图片
  - discount DECIMAL(63,0) 优惠金额
  - discount_member INT 达标人数
  - expire_time DATETIME 过期时间
  - status SMALLINT(6) 规则状态
  - add_time, update_time, deleted
  - 索引：goods_id

**litemall_comment（评论表）**
- 主键：id
- 字段：
  - value_id INT 业务ID（type=0商品；type=1专题）
  - type TINYINT(3) 评论类型
  - content VARCHAR(1023) 评论内容
  - admin_content VARCHAR(511) 管理员回复
  - user_id INT 用户ID
  - has_picture TINYINT(1) 是否有图
  - pic_urls VARCHAR(1023) 图片列表（JSON）
  - star SMALLINT(6) 评分 1-5
  - add_time, update_time, deleted
  - 索引：value_id

**litemall_topic（专题表）**
- 主键：id
- 字段：
  - title VARCHAR(255) 标题
  - subtitle VARCHAR(255) 子标题
  - content TEXT 内容（富文本）
  - price DECIMAL(10,2) 相关商品最低价
  - read_count VARCHAR(255) 阅读量
  - pic_url VARCHAR(255) 图片
  - sort_order INT 排序
  - goods VARCHAR(1023) 相关商品（JSON）
  - add_time, update_time, deleted

**litemall_issue（常见问题表）**
- 主键：id
- 字段：
  - question VARCHAR(255) 问题标题
  - answer VARCHAR(255) 问题答案
  - add_time, update_time, deleted

**litemall_keyword（关键字表）**
- 主键：id
- 字段：
  - keyword VARCHAR(127) 关键字
  - url VARCHAR(255) 跳转链接
  - is_hot TINYINT(1) 热门
  - is_default TINYINT(1) 默认
  - sort_order INT 排序
  - add_time, update_time, deleted

**litemall_ad（广告表）**
- 主键：id
- 字段：
  - name VARCHAR(63) 标题
  - link VARCHAR(255) 链接地址
  - url VARCHAR(255) 宣传图片
  - position TINYINT(3) 位置（1首页）
  - content VARCHAR(255) 活动内容
  - start_time、end_time DATETIME 开始/结束
  - enabled TINYINT(1) 启用
  - add_time, update_time, deleted
  - 索引：enabled

**litemall_notice（通知表）**
- 主键：id
- 字段：
  - title VARCHAR(63) 标题
  - content VARCHAR(511) 内容
  - admin_id INT 创建管理员ID（系统内置为0）
  - add_time, update_time, deleted

**litemall_notice_admin（通知管理员表）**
- 主键：id
- 字段：
  - notice_id INT 通知ID
  - notice_title VARCHAR(63) 通知标题
  - admin_id INT 接收管理员ID
  - read_time DATETIME 阅读时间（NULL未读）
  - add_time, update_time, deleted

**litemall_coupon（优惠券信息及规则表）**
- 主键：id
- 字段：
  - name VARCHAR(63) 名称
  - desc VARCHAR(127) 介绍
  - tag VARCHAR(63) 标签
  - total INT 数量（0无限）
  - discount DECIMAL(10,2) 优惠金额
  - min DECIMAL(10,2) 最低消费
  - limit SMALLINT(6) 领券限制
  - type SMALLINT(6) 赠送类型（0通用、1注册赠、2兑换码）
  - status SMALLINT(6) 状态（0正常、1过期、2下架）
  - goods_type SMALLINT(6) 商品限制类型（0全、1类目、2商品）
  - goods_value VARCHAR(1023) 限制值（JSON）
  - code VARCHAR(63) 兑换码
  - time_type SMALLINT(6) 时间限制（0按天、1按区间）
  - days SMALLINT(6) 有效天数
  - start_time、end_time DATETIME 使用区间
  - add_time, update_time, deleted
  - 索引：code

**litemall_coupon_user（优惠券用户使用表）**
- 主键：id
- 字段：
  - user_id INT 用户ID
  - coupon_id INT 优惠券ID
  - status SMALLINT(6) 使用状态（0未用、1已用、2过期、3下架）
  - used_time DATETIME 使用时间
  - start_time、end_time DATETIME 有效期
  - order_id INT 订单ID
  - add_time, update_time, deleted

**litemall_cart（购物车商品表）**
- 主键：id
- 字段：
  - user_id INT 用户ID
  - goods_id INT 商品ID
  - goods_sn VARCHAR(63) 商品编号
  - goods_name VARCHAR(127) 商品名称
  - product_id INT 货品ID
  - price DECIMAL(10,2) 货品价格
  - number SMALLINT(5) 数量
  - specifications VARCHAR(1023) 规格值列表（JSON）
  - checked TINYINT(1) 是否选中
  - pic_url VARCHAR(255) 图片
  - add_time, update_time, deleted

**litemall_collect（收藏表）**
- 主键：id
- 字段：
  - user_id INT 用户ID
  - value_id INT 目标ID（type=0商品；type=1专题）
  - type TINYINT(3) 收藏类型
  - add_time, update_time, deleted
  - 索引：user_id、value_id

**litemall_footprint（用户浏览足迹表）**
- 主键：id
- 字段：
  - user_id INT 用户ID
  - goods_id INT 浏览商品ID
  - add_time, update_time, deleted

**litemall_search_history（搜索历史表）**
- 主键：id
- 字段：
  - user_id INT 用户ID
  - keyword VARCHAR(63) 关键字
  - from VARCHAR(63) 来源（pc/wx/app）
  - add_time, update_time, deleted

**litemall_storage（文件存储表）**
- 主键：id
- 字段：
  - key VARCHAR(63) 文件唯一索引
  - name VARCHAR(255) 文件名
  - type VARCHAR(20) 文件类型
  - size INT 文件大小
  - url VARCHAR(255) 访问链接
  - add_time, update_time, deleted
  - 索引：key

**litemall_system（系统配置表）**
- 主键：id
- 字段：
  - key_name VARCHAR(255) 配置名
  - key_value VARCHAR(255) 配置值
  - add_time, update_time, deleted

**litemall_region（行政区域表）**
- 主键：id
- 字段：
  - pid INT 父ID（区县→市→省）
  - name VARCHAR(120) 名称
  - type TINYINT(3) 类型（1省、2市、3区县）
  - code INT 行政编码
  - 索引：pid、type、code

**litemall_log（操作日志表）**
- 主键：id
- 字段：
  - admin VARCHAR(45) 管理员
  - ip VARCHAR(45) 管理员地址
  - type INT 操作分类
  - action VARCHAR(45) 操作动作
  - status TINYINT(1) 操作状态
  - result VARCHAR(127) 操作结果或消息
  - comment VARCHAR(255) 补充信息
  - add_time, update_time, deleted

